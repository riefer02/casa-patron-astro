---
import BaseLayout from "../layouts/BaseLayout.astro";

const title = "Contact Casa Patron - Book Your Stay in Alto, NM";
const description =
  "Contact Casa Patron to book your mountain getaway in Alto, NM. Get in touch for reservations, questions about amenities, or information about our vacation rental near Ski Apache.";

const keywords = [
  "contact casa patron",
  "book reservation",
  "alto new mexico",
  "vacation rental booking",
  "ski apache lodging",
  "mountain cabin rental",
  "casa patron contact",
];

const contactSchema = {
  "@context": "https://schema.org",
  "@type": "ContactPage",
  name: "Contact Casa Patron",
  description: description,
  url: "https://casapatronalto.com/contact-us/",
  mainEntity: {
    "@type": "LodgingBusiness",
    name: "Casa Patron",
    telephone: "+1-817-223-0272",
    // email: "valerie@casapatronalto.com", // Removed to reduce spam exposure
    address: {
      "@type": "PostalAddress",
      streetAddress: "176 Neill Rd",
      addressLocality: "Alto",
      addressRegion: "NM",
      postalCode: "88312",
      addressCountry: "US",
    },
  },
};
---

<BaseLayout
  title={title}
  description={description}
  keywords={keywords}
  schemaMarkup={contactSchema}
  type="website"
>
  <div class="max-w-4xl mx-auto">
    <header class="text-center mb-12">
      <h1 class="text-4xl font-bold text-secondary mb-4">
        Contact Casa Patron
      </h1>
      <p class="text-xl text-gray-600">
        Ready to book your mountain getaway? Get in touch with us!
      </p>
    </header>

    <div class="grid md:grid-cols-2 gap-12">
      <!-- Contact Information -->
      <div class="space-y-8">
        <div class="bg-white rounded-lg shadow-lg p-6">
          <h2 class="text-2xl font-bold text-secondary mb-6">
            Booking Information
          </h2>

          <div class="space-y-4">
            <div class="flex items-center">
              <div class="bg-primary rounded-full p-3 mr-4">
                <svg
                  class="w-6 h-6 text-grey-neutral"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                  ></path>
                </svg>
              </div>
              <div>
                <h3 class="font-bold text-grey-neutral">Phone</h3>
                <a
                  href="tel:+18172230272"
                  class="text-secondary hover:text-tertiary">(817) 223-0272</a
                >
              </div>
            </div>

            <div class="flex items-center">
              <div class="bg-primary rounded-full p-3 mr-4">
                <svg
                  class="w-6 h-6 text-grey-neutral"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                  ></path>
                </svg>
              </div>
              <div>
                <h3 class="font-bold text-grey-neutral">Email</h3>
                <a
                  href="#"
                  data-email="dmFsZXJpZUBjYXNhcGF0cm9uYWx0by5jb20="
                  class="text-secondary hover:text-tertiary reveal-email"
                  >[Click to reveal email]</a
                >
              </div>
            </div>

            <div class="flex items-center">
              <div class="bg-primary rounded-full p-3 mr-4">
                <svg
                  class="w-6 h-6 text-grey-neutral"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
              </div>
              <div>
                <h3 class="font-bold text-grey-neutral">Address</h3>
                <p class="text-gray-600">176 Neill Rd<br />Alto, NM 88312</p>
              </div>
            </div>
          </div>
        </div>

        <div class="bg-grey-neutral rounded-lg p-6 text-white">
          <h3 class="text-xl font-bold text-primary mb-4">
            Quick Booking Tips
          </h3>
          <ul class="space-y-2 text-sm">
            <li class="flex items-start">
              <span class="text-primary mr-2">•</span>
              <span>Best rates available by contacting us directly</span>
            </li>
            <li class="flex items-start">
              <span class="text-primary mr-2">•</span>
              <span>Check-in: 4:00 PM | Check-out: 11:00 AM</span>
            </li>
            <li class="flex items-start">
              <span class="text-primary mr-2">•</span>
              <span>Sleeps up to 14 guests comfortably</span>
            </li>
            <li class="flex items-start">
              <span class="text-primary mr-2">•</span>
              <span>Pet-friendly with advance notice</span>
            </li>
          </ul>
        </div>
      </div>

      <!-- Contact Actions -->
      <div class="bg-white rounded-lg shadow-lg p-6">
        <h2 class="text-2xl font-bold text-secondary mb-6">Get in Touch</h2>

        <div class="space-y-6">
          <p class="text-gray-600">
            Ready to book your stay or have questions about Casa Patron? We'd
            love to hear from you!
          </p>

          <!-- Primary Email Action -->
          <div class="email-actions">
            <a
              href="#"
              data-email="dmFsZXJpZUBjYXNhcGF0cm9uYWx0by5jb20="
              data-subject="Casa Patron Booking Inquiry"
              data-body="Hi! I'm interested in booking Casa Patron. Please let me know about availability and rates.

Preferred dates:
Number of guests:

Thank you!"
              class="email-button block w-full bg-secondary hover:bg-tertiary text-white font-bold py-4 px-6 rounded-lg transition-colors duration-200 text-center shadow-lg"
            >
              <div class="flex items-center justify-center">
                <svg
                  class="w-5 h-5 mr-2"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                  ></path>
                </svg>
                Send Booking Email
              </div>
            </a>

            <!-- Alternative Actions -->
            <div class="mt-4 text-center">
              <p class="text-sm text-gray-600 mb-3">
                No email client? No problem:
              </p>
              <div class="flex gap-3 justify-center">
                <button
                  data-email="dmFsZXJpZUBjYXNhcGF0cm9uYWx0by5jb20="
                  class="copy-email-button flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded-lg transition-colors duration-200"
                >
                  <svg
                    class="w-4 h-4 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                    ></path>
                  </svg>
                  Copy Email
                </button>
                <button
                  data-email="dmFsZXJpZUBjYXNhcGF0cm9uYWx0by5jb20="
                  class="show-email-button flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm rounded-lg transition-colors duration-200"
                >
                  <svg
                    class="w-4 h-4 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                    ></path>
                  </svg>
                  Show Email
                </button>
              </div>
              <div
                id="revealed-email"
                class="mt-3 hidden p-3 bg-blue-50 rounded-lg"
              >
                <p class="text-sm text-gray-600">Email us at:</p>
                <p
                  class="font-mono font-semibold text-secondary"
                  id="email-display"
                >
                </p>
              </div>
            </div>
          </div>

          <!-- Phone Button -->
          <a
            href="tel:+18172230272"
            class="block w-full bg-primary hover:bg-tertiary text-grey-neutral font-medium py-4 px-6 rounded-lg transition-colors duration-200 text-center"
          >
            <div class="flex items-center justify-center">
              <svg
                class="w-5 h-5 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                ></path>
              </svg>
              Call (817) 223-0272
            </div>
          </a>

          <!-- Contact Info Summary -->
          <div class="bg-gray-50 rounded-lg p-4">
            <h3 class="font-bold text-grey-neutral mb-3">
              What to Include in Your Message:
            </h3>
            <ul class="text-sm text-gray-600 space-y-1">
              <li class="flex items-start">
                <span class="text-secondary mr-2">•</span>
                <span>Preferred check-in and check-out dates</span>
              </li>
              <li class="flex items-start">
                <span class="text-secondary mr-2">•</span>
                <span>Number of guests</span>
              </li>
              <li class="flex items-start">
                <span class="text-secondary mr-2">•</span>
                <span>Any special requests or questions</span>
              </li>
              <li class="flex items-start">
                <span class="text-secondary mr-2">•</span>
                <span>Best way to reach you</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Location Info -->
    <div class="mt-12 bg-gray-50 rounded-lg p-6">
      <h2 class="text-2xl font-bold text-secondary mb-4">Location & Area</h2>
      <div class="grid md:grid-cols-3 gap-6">
        <div class="text-left md:text-center">
          <h3 class="font-bold text-grey-neutral mb-2">Ski Apache</h3>
          <p class="text-gray-600 text-sm">
            5 minutes away<br />Perfect for ski trips
          </p>
        </div>
        <div class="text-left md:text-center">
          <h3 class="font-bold text-grey-neutral mb-2">Ruidoso</h3>
          <p class="text-gray-600 text-sm">
            15 minutes away<br />Dining & entertainment
          </p>
        </div>
        <div class="text-left md:text-center">
          <h3 class="font-bold text-grey-neutral mb-2">
            Lincoln National Forest
          </h3>
          <p class="text-gray-600 text-sm">
            Surrounded by nature<br />Hiking & outdoor activities
          </p>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<script>
  // Email protection - reveal on click
  document.addEventListener("DOMContentLoaded", function () {
    // Function to decode base64 encoded email
    function decodeEmail(encodedEmail) {
      try {
        return atob(encodedEmail);
      } catch {
        console.warn("Failed to decode email");
        return null;
      }
    }

    const emailLinks = document.querySelectorAll("[data-email]");

    emailLinks.forEach((link) => {
      link.addEventListener("click", function (e) {
        const target = e.currentTarget;
        const encodedEmail = target.getAttribute("data-email");

        if (!encodedEmail) {
          console.warn("No email found in data-email attribute");
          return;
        }

        const email = decodeEmail(encodedEmail);
        if (!email) {
          console.warn("Failed to decode email address");
          return;
        }

        try {
          // Handle copy email button
          if (target.classList.contains("copy-email-button")) {
            e.preventDefault();
            if (navigator.clipboard) {
              navigator.clipboard
                .writeText(email)
                .then(() => {
                  // Temporarily change button text to show success
                  const originalText = target.innerHTML;
                  target.innerHTML = `
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    Copied!
                  `;
                  setTimeout(() => {
                    target.innerHTML = originalText;
                  }, 2000);
                })
                .catch(() => {
                  // Show email if clipboard fails
                  document.getElementById("email-display").textContent = email;
                  document
                    .getElementById("revealed-email")
                    .classList.remove("hidden");
                });
            } else {
              // Show email if clipboard not available
              document.getElementById("email-display").textContent = email;
              document
                .getElementById("revealed-email")
                .classList.remove("hidden");
            }
            return;
          }

          // Handle show email button
          if (target.classList.contains("show-email-button")) {
            e.preventDefault();
            document.getElementById("email-display").textContent = email;
            document
              .getElementById("revealed-email")
              .classList.remove("hidden");

            // Temporarily change button text to show success
            const originalText = target.innerHTML;
            target.innerHTML = `
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              Revealed!
            `;
            setTimeout(() => {
              target.innerHTML = originalText;
            }, 2000);
            return;
          }

          // Handle simple email reveal links
          if (
            target.textContent &&
            target.textContent.includes("[Click to reveal email]")
          ) {
            e.preventDefault();
            target.textContent = email;
            if (target.tagName.toLowerCase() === "a") {
              target.href = `mailto:${email}`;
            }
            return;
          }

          // Handle email button with subject and body
          if (target.classList.contains("email-button")) {
            e.preventDefault();
            const subject = target.getAttribute("data-subject") || "";
            const body = target.getAttribute("data-body") || "";
            const mailtoUrl = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = mailtoUrl;
            return;
          }
        } catch (error) {
          console.error("Error handling email click:", error);
          alert(`Please email us at: ${email}`);
        }
      });
    });
  });
</script>
