---
import BaseLayout from "../layouts/BaseLayout.astro";

const title = "Contact Casa Patron - Book Your Stay in Alto, NM";
const description =
  "Contact Casa Patron to book your mountain getaway in Alto, NM. Get in touch for reservations, questions about amenities, or information about our vacation rental near Ski Apache.";

const keywords = [
  "contact casa patron",
  "book reservation",
  "alto new mexico",
  "vacation rental booking",
  "ski apache lodging",
  "mountain cabin rental",
  "casa patron contact",
];

// Breadcrumbs for navigation
const breadcrumbs = [
  { name: "Home", url: "/" },
  { name: "Contact", url: "/contact-us/" },
];

const contactSchema = {
  "@context": "https://schema.org",
  "@type": "ContactPage",
  name: "Contact Casa Patron",
  description: description,
  url: "https://casapatronalto.com/contact-us/",
  mainEntity: {
    "@type": "LodgingBusiness",
    name: "Casa Patron",
    telephone: "+1-817-223-0272",
    // email: "valerie@casapatronalto.com", // Removed to reduce spam exposure
    address: {
      "@type": "PostalAddress",
      streetAddress: "176 Neill Rd",
      addressLocality: "Alto",
      addressRegion: "NM",
      postalCode: "88312",
      addressCountry: "US",
    },
  },
};
---

<BaseLayout
  title={title}
  description={description}
  keywords={keywords}
  schemaMarkup={contactSchema}
  type="website"
  breadcrumbs={breadcrumbs}
>
  <div class="max-w-4xl mx-auto">
    <header class="text-center mb-12">
      <h1 class="text-4xl font-bold text-secondary mb-4">
        Contact Casa Patron
      </h1>
      <p class="text-xl text-gray-600">
        Ready to book your mountain getaway? Get in touch with us!
      </p>
    </header>

    <div class="grid gap-10 lg:grid-cols-2">
      <section class="space-y-6 rounded-3xl bg-white p-6 shadow-xl lg:p-8">
        <div>
          <h2 class="text-2xl font-bold text-secondary">Reach us directly</h2>
          <p class="mt-2 text-gray-600">
            A quick call or email is the fastest way to lock in Casa Patron for
            your group.
          </p>
        </div>

        <div class="space-y-6">
          <div class="flex items-start gap-4">
            <div class="rounded-2xl bg-primary/80 p-3 text-grey-neutral">
              <svg
                class="h-6 w-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                ></path>
              </svg>
            </div>
            <div>
              <h3 class="text-sm font-semibold text-grey-neutral uppercase tracking-wide">
                Call or text
              </h3>
              <a
                href="tel:+18172230272"
                class="text-2xl font-bold text-secondary hover:text-tertiary"
                >(817) 223-0272</a
              >
              <p class="text-sm text-gray-500">Daily 8a–8p Mountain Time</p>
            </div>
          </div>

          <div class="flex items-start gap-4">
            <div class="rounded-2xl bg-primary/80 p-3 text-grey-neutral">
              <svg
                class="h-6 w-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                ></path>
              </svg>
            </div>
            <div>
              <h3 class="text-sm font-semibold text-grey-neutral uppercase tracking-wide">
                Email
              </h3>
              <a
                href="#"
                data-email="dmFsZXJpZUBjYXNhcGF0cm9uYWx0by5jb20="
                class="text-secondary hover:text-tertiary"
                >[Click to reveal email]</a
              >
              <p class="text-sm text-gray-500">
                Hidden from bots—tap to reveal or use the buttons on the right.
              </p>
            </div>
          </div>

          <div class="flex items-start gap-4">
            <div class="rounded-2xl bg-primary/80 p-3 text-grey-neutral">
              <svg
                class="h-6 w-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                ></path>
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                ></path>
              </svg>
            </div>
            <div>
              <h3 class="text-sm font-semibold text-grey-neutral uppercase tracking-wide">
                Address
              </h3>
              <p class="text-gray-600">
                176 Neill Rd<br />Alto, NM 88312
              </p>
            </div>
          </div>
        </div>

        <div class="rounded-2xl bg-gray-50 p-5">
          <p class="text-sm font-semibold uppercase tracking-wide text-grey-neutral">
            Helpful to know
          </p>
          <ul class="mt-3 space-y-2 text-sm text-gray-600">
            <li>Direct bookings get our most flexible nightly rates.</li>
            <li>Check-in 4:00 PM • Check-out 11:00 AM.</li>
            <li>Sleeps up to 14 guests; pet-friendly with notice.</li>
          </ul>
        </div>
      </section>

      <section class="rounded-3xl bg-grey-neutral p-6 text-white shadow-xl lg:p-8">
        <h2 class="text-2xl font-bold text-primary">Send booking details</h2>
        <p class="mt-3 text-white/80">
          Share a few trip notes and we&apos;ll reply with availability,
          pricing, and next steps.
        </p>

        <ul class="mt-6 space-y-2 rounded-2xl border border-white/20 bg-white/5 p-5 text-sm text-white/80">
          <li class="flex items-start gap-2">
            <span class="text-primary">•</span>
            <span>Your preferred check-in / check-out dates.</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-primary">•</span>
            <span>Number of adults, kids, and pets.</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-primary">•</span>
            <span>Any special requests or questions.</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-primary">•</span>
            <span>The best way to reach you.</span>
          </li>
        </ul>

        <a
          href="#"
          data-email="dmFsZXJpZUBjYXNhcGF0cm9uYWx0by5jb20="
          data-subject="Casa Patron Booking Inquiry"
          data-body="Hi! I'm interested in booking Casa Patron. Please let me know about availability and rates.

Preferred dates:
Number of guests:

Thank you!"
          class="email-button mt-6 block rounded-2xl bg-secondary px-6 py-4 text-center text-lg font-semibold uppercase tracking-wide text-white shadow-lg transition hover:bg-tertiary"
        >
          Send Booking Email
        </a>

        <div class="mt-5 rounded-2xl bg-white/5 p-5">
          <p class="text-sm font-semibold uppercase tracking-wide text-white/80">
            No email client?
          </p>
          <div class="mt-3 flex flex-wrap gap-3">
            <button
              data-email="dmFsZXJpZUBjYXNhcGF0cm9uYWx0by5jb20="
              class="copy-email-button flex items-center rounded-full bg-white/10 px-4 py-2 text-sm font-medium text-white transition hover:bg-white/20"
            >
              <svg
                class="mr-2 h-4 w-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                ></path>
              </svg>
              Copy email
            </button>
            <button
              data-email="dmFsZXJpZUBjYXNhcGF0cm9uYWx0by5jb20="
              class="show-email-button flex items-center rounded-full bg-white/10 px-4 py-2 text-sm font-medium text-white transition hover:bg-white/20"
            >
              <svg
                class="mr-2 h-4 w-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                ></path>
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                ></path>
              </svg>
              Show email
            </button>
          </div>
          <div
            id="revealed-email"
            class="mt-4 hidden rounded-2xl border border-white/20 bg-white/10 p-4"
          >
            <p class="text-xs uppercase tracking-wide text-white/60">
              Email us at
            </p>
            <p class="font-mono text-lg font-semibold text-primary" id="email-display"></p>
          </div>
        </div>

        <a
          href="tel:+18172230272"
          class="mt-5 block rounded-full border border-white/30 px-6 py-3 text-center text-sm font-semibold uppercase tracking-wide text-white transition hover:bg-white/10"
        >
          Prefer to talk? Call (817) 223-0272
        </a>
      </section>
    </div>

    <!-- Location Info -->
    <section class="mt-12 rounded-3xl bg-gray-50 p-6 md:p-8">
      <div class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
        <h2 class="text-2xl font-bold text-secondary">Location & Area</h2>
        <p class="text-sm text-gray-600 md:text-right">
          Casa Patron sits between Ski Apache, Ruidoso, and Lincoln National Forest.
        </p>
      </div>
      <div class="mt-6 grid gap-6 md:grid-cols-3">
        <div class="rounded-2xl border border-secondary/10 bg-white p-4 text-left md:text-center">
          <h3 class="font-bold text-grey-neutral mb-2">Ski Apache</h3>
          <p class="text-gray-600 text-sm leading-relaxed">
            5 minutes away<br />Perfect for ski trips
          </p>
        </div>
        <div class="rounded-2xl border border-secondary/10 bg-white p-4 text-left md:text-center">
          <h3 class="font-bold text-grey-neutral mb-2">Ruidoso</h3>
          <p class="text-gray-600 text-sm leading-relaxed">
            15 minutes away<br />Dining & entertainment
          </p>
        </div>
        <div class="rounded-2xl border border-secondary/10 bg-white p-4 text-left md:text-center">
          <h3 class="font-bold text-grey-neutral mb-2">
            Lincoln National Forest
          </h3>
          <p class="text-gray-600 text-sm leading-relaxed">
            Surrounded by nature<br />Hiking & outdoor activities
          </p>
        </div>
      </div>
    </section>
  </div>
</BaseLayout>

<script>
  // Email protection - reveal on click
  document.addEventListener("DOMContentLoaded", function () {
    // Function to decode base64 encoded email
    function decodeEmail(encodedEmail) {
      try {
        return atob(encodedEmail);
      } catch {
        console.warn("Failed to decode email");
        return null;
      }
    }

    const emailLinks = document.querySelectorAll("[data-email]");

    emailLinks.forEach((link) => {
      link.addEventListener("click", function (e) {
        const target = e.currentTarget;
        const encodedEmail = target.getAttribute("data-email");

        if (!encodedEmail) {
          console.warn("No email found in data-email attribute");
          return;
        }

        const email = decodeEmail(encodedEmail);
        if (!email) {
          console.warn("Failed to decode email address");
          return;
        }

        try {
          // Handle copy email button
          if (target.classList.contains("copy-email-button")) {
            e.preventDefault();
            if (navigator.clipboard) {
              navigator.clipboard
                .writeText(email)
                .then(() => {
                  // Temporarily change button text to show success
                  const originalText = target.innerHTML;
                  target.innerHTML = `
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    Copied!
                  `;
                  setTimeout(() => {
                    target.innerHTML = originalText;
                  }, 2000);
                })
                .catch(() => {
                  // Show email if clipboard fails
                  document.getElementById("email-display").textContent = email;
                  document
                    .getElementById("revealed-email")
                    .classList.remove("hidden");
                });
            } else {
              // Show email if clipboard not available
              document.getElementById("email-display").textContent = email;
              document
                .getElementById("revealed-email")
                .classList.remove("hidden");
            }
            return;
          }

          // Handle show email button
          if (target.classList.contains("show-email-button")) {
            e.preventDefault();
            document.getElementById("email-display").textContent = email;
            document
              .getElementById("revealed-email")
              .classList.remove("hidden");

            // Temporarily change button text to show success
            const originalText = target.innerHTML;
            target.innerHTML = `
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              Revealed!
            `;
            setTimeout(() => {
              target.innerHTML = originalText;
            }, 2000);
            return;
          }

          // Handle simple email reveal links
          if (
            target.textContent &&
            target.textContent.includes("[Click to reveal email]")
          ) {
            e.preventDefault();
            target.textContent = email;
            if (target.tagName.toLowerCase() === "a") {
              target.href = `mailto:${email}`;
            }
            return;
          }

          // Handle email button with subject and body
          if (target.classList.contains("email-button")) {
            e.preventDefault();
            const subject = target.getAttribute("data-subject") || "";
            const body = target.getAttribute("data-body") || "";
            const mailtoUrl = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = mailtoUrl;
            return;
          }
        } catch (error) {
          console.error("Error handling email click:", error);
          alert(`Please email us at: ${email}`);
        }
      });
    });
  });
</script>
