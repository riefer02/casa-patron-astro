---
globs: *.css,*.astro,*.jsx,*.tsx
description: "Tailwind CSS v4 migration guidelines and best practices for Astro"
---

# Tailwind CSS v4 Migration Guide

## üöÄ Key Changes in Tailwind v4

### Installation & Configuration
```bash
# Install Tailwind v4 with Vite plugin
npm install tailwindcss @tailwindcss/vite

# astro.config.mjs
import tailwindcss from '@tailwindcss/vite'
export default defineConfig({
  vite: {
    plugins: [tailwindcss()],
  },
})
```

### CSS Import Method
```css
/* styles/global.css - New v4 approach */
@import "tailwindcss";

/* Custom theme variables */
@theme {
  --color-primary: #FEE43A;
  --color-secondary: #1C68CB;
  --color-tertiary: #FF715B;
  --color-grey-neutral: #273240;
  --color-success: #28D679;
  
  /* Custom animations */
  --animate-spin-words: spin-words 8s linear infinite;
}

/* Custom utilities using @utility API */
@utility tab-4 {
  tab-size: 4;
}

/* Custom keyframes */
@keyframes spin-words {
  0%, 25% { transform: translateY(0%); }
  33%, 58% { transform: translateY(-100%); }
  66%, 91% { transform: translateY(-200%); }
  100% { transform: translateY(-300%); }
}
```

## ‚ö° Migration Patterns

### 1. Shadow/Radius/Blur Updates
```html
<!-- OLD v3 -->
<div class="shadow-sm rounded-md">
<div class="shadow rounded-lg">

<!-- NEW v4 -->
<div class="shadow-xs rounded-md">
<div class="shadow-sm rounded-lg">
```

### 2. Space Utilities Migration
```html
<!-- OLD: space-y-* utilities -->
<div class="space-y-4">
  <div>Item 1</div>
  <div>Item 2</div>
</div>

<!-- BETTER: Use flex/grid with gap -->
<div class="flex flex-col gap-4">
  <div>Item 1</div>
  <div>Item 2</div>
</div>
```

### 3. CSS Variable Access
```jsx
// OLD v3: resolveConfig approach
import resolveConfig from 'tailwindcss/resolveConfig'

// NEW v4: Direct CSS variables
<motion.div 
  animate={{ 
    backgroundColor: "var(--color-primary)" 
  }} 
/>

// JavaScript access
const styles = getComputedStyle(document.documentElement)
const primaryColor = styles.getPropertyValue("--color-primary")
```

## üé® Casa Patron Theme Configuration

### Custom Theme in CSS
```css
@theme {
  /* Brand Colors */
  --color-primary: #FEE43A;
  --color-secondary: #1C68CB;
  --color-tertiary: #FF715B;
  --color-grey-neutral: #273240;
  --color-success: #28D679;
  
  /* Secondary variants for existing animations */
  --color-secondary-red: theme(--color-primary);
  --color-secondary-green: theme(--color-success);
  --color-secondary-blue: theme(--color-tertiary);
  
  /* Custom animations */
  --animate-spin-words: spin-words 8s linear infinite;
  
  /* Text shadows */
  --shadow-text: 0 2px 4px rgba(0, 0, 0, 0.5);
}
```

### Component-Scoped Styles in Astro
```astro
---
// Component logic here
---

<div class="hero-text">
  <h1>Casa Patron</h1>
</div>

<style>
  .hero-text h1 {
    /* Direct theme variable usage */
    color: var(--color-primary);
    text-shadow: var(--shadow-text);
  }
</style>
```

## üîß Astro Integration Best Practices

### 1. Global Styles Setup
```astro
---
// layouts/BaseLayout.astro
import '../styles/global.css'
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{title}</title>
  </head>
  <body>
    <slot />
  </body>
</html>
```

### 2. Component Styling Patterns
```astro
---
// Prefer Tailwind classes in templates
const { variant = 'primary' } = Astro.props
const buttonClasses = {
  primary: 'bg-primary hover:bg-secondary text-white',
  secondary: 'bg-secondary hover:bg-tertiary text-white'
}
---

<button class={`px-4 py-2 rounded ${buttonClasses[variant]}`}>
  <slot />
</button>

<style>
  /* Use <style> only for complex custom styles */
  button {
    transition: all 0.2s ease;
  }
</style>
```

### 3. Responsive Design Patterns
```html
<!-- Maintain existing responsive patterns -->
<div class="text-3xl sm:text-5xl lg:text-6xl xl:text-[72px]">
  Casa Patron
</div>

<!-- Use new gap utilities -->
<div class="flex flex-col gap-4 sm:gap-6 lg:gap-8">
  <!-- Content -->
</div>
```

## ‚ö†Ô∏è Migration Gotchas

### 1. PostCSS Not Required
- Remove `postcss.config.js` - Vite plugin handles everything
- Remove `autoprefixer` dependency
- Remove `@tailwindcss/postcss` if present

### 2. CLI Commands Update
```bash
# OLD
npx tailwindcss -i input.css -o output.css

# NEW (if using CLI separately)
npx @tailwindcss/cli -i input.css -o output.css
```

### 3. Hover Behavior Change
```css
/* v4 only applies hover on hover-capable devices */
/* If you need old behavior: */
@custom-variant hover (&:hover);
```

## üéØ Casa Patron Specific Migrations

### 1. Preserve Animation Classes
```css
/* Ensure spin-words animation is preserved */
.animate-spin-words {
  animation: var(--animate-spin-words);
}
```

### 2. Text Shadow Utility
```css
@utility text-shadow {
  text-shadow: var(--shadow-text);
}
```

### 3. Brand Color Utilities
```html
<!-- These should work out of the box with theme config -->
<div class="bg-primary text-secondary border-tertiary">
  Casa Patron Content
</div>
```

## ‚úÖ Testing Checklist
- [ ] All brand colors render correctly
- [ ] Custom animations work (spin-words)
- [ ] Responsive breakpoints maintained
- [ ] Text shadows display properly
- [ ] Build process completes without errors
- [ ] Hot reload works in development
- [ ] Production build is optimized